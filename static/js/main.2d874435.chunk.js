(this["webpackJsonpspotify-u"]=this["webpackJsonpspotify-u"]||[]).push([[0],{20:function(e,n,t){e.exports=t(32)},25:function(e,n,t){},32:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(15),c=t.n(r),s=(t(25),t(4)),l=t(33),i=t(18),u=t(9),h=t.n(u),f=t(17),p=t(2),m=Object(p.a)(),d=new f.a,v=function(){g()},g=function(){var e=d.get("access_token");if(void 0!==e)return Promise.resolve(e);var n,t=function(){var e=h.a.parse(window.location.search),n=e.access_token,t=e.refresh_token,o=e.expires_in,a=Object(i.a)(e,["access_token","refresh_token","expires_in"]);return function(e){window.history.replaceState(null,null,window.location.href.replace(window.location.search,(""!==e?"?":"")+e))}(h.a.stringify(a)),window.location.hash=window.location.hash.replace("_=_",""),{access_token:n,expires_in:o,refresh_token:t}}();return e=t.access_token,void 0!==(n=e)&&null!==n&&""!==n?(w(e,t.refresh_token),Promise.resolve(e)):(_(),null)},k=function(){if(void 0===d.get("recently_refreshed_access_token")){var e=d.get("refresh_token");return void 0===e?null:(console.log("Refreshing access token..."),fetch("https://spotify-u-backend.herokuapp.com/refresh_token?refresh_token="+e).then((function(e){return e.json()})).then((function(n){console.log("Refreshed access token");var t=n.access_token;return w(t,e),t})))}};function _(){m.push("/loading"),window.location.replace("https://spotify-u-backend.herokuapp.com/login")}function w(e,n){d.set("access_token",e,{path:"/",maxAge:3600}),d.set("refresh_token",n,{path:"/",maxAge:3600}),d.set("recently_refreshed_access_token","",{path:"/",maxAge:900})}function E(e){var n=e.status;if(204===n)return Promise.resolve(null);var t=e.json();return Promise.all([n,t]).then((function(e){var n=Object(s.a)(e,2),t=n[0],o=n[1];return 401===t?(d.remove("access_token"),_(),null):200===t?o:null}))}var y=t(6),b=t.n(y);t(8);var j=Object(l.d)((function(e){var n=Object(o.useState)(0),t=Object(s.a)(n,2),r=t[0],c=t[1],l=Object(o.useState)(null),i=Object(s.a)(l,2),u=i[0],h=i[1];Object(o.useEffect)((function(){f()}),[]);var f=function(){(function(){var e=g();return null===e?Promise.resolve(null):e.then((function(e){return fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:"Bearer "+e}})})).then(E).then((function(e){return e?e.item.name:null}))})().then((function(e){h(e)}))};return a.a.createElement("div",{className:"App"},a.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null),a.a.createElement("button",{onClick:f},"Show Current Song"),a.a.createElement("h1",null,u||"-No song is currently playing-"),a.a.createElement("button",{onClick:function(){c(r+1)}},"Increment (test)"),a.a.createElement("h1",null,r))}));var x=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),a.a.createElement("h1",null,"Loading..."))};var A=function(){return v(),k(),window.setInterval((function(){k()}),6e4),a.a.createElement(l.b,{history:m},a.a.createElement("div",{className:"App"},a.a.createElement(l.c,null,a.a.createElement(l.a,{path:"/",exact:!0,component:j}),a.a.createElement(l.a,{path:"/loading",exact:!0,component:x}),a.a.createElement(l.a,{path:"/auth",exact:!0,component:function(){return v(),null}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},8:function(e,n,t){}},[[20,1,2]]]);
//# sourceMappingURL=main.2d874435.chunk.js.map
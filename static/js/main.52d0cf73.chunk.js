(this["webpackJsonpspotify-u"]=this["webpackJsonpspotify-u"]||[]).push([[0],{12:function(e,n,t){},16:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},20:function(e,n,t){e.exports=t(32)},25:function(e,n,t){},32:function(e,n,t){"use strict";t.r(n);var o=t(0),c=t.n(o),a=t(14),r=t.n(a),s=(t(25),t(6)),l=t(15),i=t.n(l),u=t(19),f=new u.a,h=function(){p()},p=function(){console.log("accessToken1");var e=f.get("access_token");if(!k(e))return Promise.resolve(e);console.log("accessToken2");var n=function(){var e=i.a.parse(window.location.search);return{access_token:e.access_token,expires_in:e.expires_in,refresh_token:e.refresh_token}}();if(e=n.access_token,!k(e))return f.set("access_token",e,{path:"/",maxAge:n.expires_in}),f.set("refresh_token",n.refresh_token,{path:"/"}),Promise.resolve(e);console.log("accessToken3");var t=function(){var e=f.get("refresh_token");return void 0===e?null:(console.log("refreshTokenToGetAccessToken..."),fetch("https://spotify-u-backend.herokuapp.com/refresh_token?refresh_token="+e).then((function(e){return e.json()})).then((function(e){return m(),f.set("access_token",e.access_token),e.access_token})))}();return null!==t?t:(console.log("accessToken4"),window.location.replace("https://spotify-u-backend.herokuapp.com/login"),null)},m=function(){f.remove("access_token")};function k(e){return void 0===e||null===e||""===e}function v(e){var n=e.status,t=e.json();return Promise.all([n,t]).then((function(e){var n=Object(s.a)(e,2),t=n[0],o=n[1];return 401===t&&(m(),h()),200===t?o:null})).catch((function(e){}))}var g=t(16),d=t.n(g);t(12);var _=function(){var e=Object(o.useState)(0),n=Object(s.a)(e,2),t=n[0],a=n[1],r=Object(o.useState)(null),l=Object(s.a)(r,2),i=l[0],u=l[1];return Object(o.useEffect)((function(){h()}),[]),c.a.createElement("div",{className:"App"},c.a.createElement("img",{src:d.a,className:"App-logo",alt:"logo"}),c.a.createElement("p",null),c.a.createElement("button",{onClick:function(){(function(){var e=p();return null===e?null:e.then((function(e){return fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:"Bearer "+e}})})).then(v).then((function(e){return e?e.item.name:null}))})().then((function(e){u(e)}))}},"Show Current Song"),c.a.createElement("h1",null,i||"-No song is currently playing-"),c.a.createElement("button",{onClick:function(){a(t+1)}},"Increment"),c.a.createElement("h1",null,t))},E=t(18),w=t(1);var b=function(){return c.a.createElement(E.a,{basename:"/SpotifyU"},c.a.createElement("div",{className:"App"},c.a.createElement(w.c,null,c.a.createElement(w.a,{path:"/",exact:!0,component:_}),c.a.createElement(w.a,{path:"/auth",exact:!0,component:function(){return h(),null}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(b,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[20,1,2]]]);
//# sourceMappingURL=main.52d0cf73.chunk.js.map
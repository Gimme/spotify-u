(this["webpackJsonpspotify-u"]=this["webpackJsonpspotify-u"]||[]).push([[0],{20:function(e,t,n){},27:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},53:function(e,t,n){e.exports=n(76)},58:function(e,t,n){},76:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),r=n(15),c=n.n(r),l=(n(58),n(9)),i=n(49),s=n(23),u=n.n(s),m=n(48),h=n(12),f=Object(h.a)(),d=new m.a,p=function(){g()},g=function(){var e=d.get("access_token");if(void 0!==e)return Promise.resolve(e);var t,n=function(){var e=u.a.parse(window.location.search),t=e.access_token,n=e.refresh_token,a=e.expires_in,o=Object(i.a)(e,["access_token","refresh_token","expires_in"]);return function(e){window.history.replaceState(null,"",window.location.href.replace(window.location.search,(""!==e?"?":"")+e))}(u.a.stringify(o)),window.location.hash=window.location.hash.replace("_=_",""),{access_token:t,expires_in:a,refresh_token:n}}();return e=n.access_token,void 0!==(t=e)&&null!==t&&""!==t?(y(e,n.refresh_token),Promise.resolve(e)):(k(),null)},v=function(){if(void 0===d.get("recently_refreshed_access_token")){var e=d.get("refresh_token");void 0!==e&&(console.log("Refreshing access token..."),fetch("https://spotify-u-backend.herokuapp.com/refresh_token?refresh_token="+e).then((function(e){return e.json()})).then((function(t){console.log("Refreshed access token"),y(t.access_token,e)})))}};function k(){f.push("/loading"),window.location.replace("https://spotify-u-backend.herokuapp.com/login")}function y(e,t){d.set("access_token",e,{path:"/",maxAge:3600}),d.set("refresh_token",t,{path:"/",maxAge:3600}),d.set("recently_refreshed_access_token","",{path:"/",maxAge:900})}function E(e,t){var n=g();return null===n?Promise.resolve(null):n.then((function(n){return fetch("https://api.spotify.com/v1/"+e+(t?"?"+u.a.stringify(t):""),{headers:{Authorization:"Bearer "+n}})})).then(w)}function w(e){var t=e.status;if(204===t)return Promise.resolve(null);var n=e.json();return Promise.all([t,n]).then((function(e){var t=Object(l.a)(e,2),n=t[0],a=t[1];return 401===n?(d.remove("access_token"),k(),null):200===n?a:null}))}var b=n(27),_=n.n(b),j=(n(20),n(98)),O=n(103),S=n(104),C=n(46);function x(e){var t=e.index,n=e.style,a=e.data.items[t];return o.a.createElement(O.a,{button:!0,style:n,key:t,selected:e.data.selectedIndex===t,onClick:function(){e.data.onItemClick&&e.data.onItemClick(a,t)}},o.a.createElement(S.a,{primary:a.name}))}var I=function(e){var t=Object(a.useState)(null),n=Object(l.a)(t,2),r=n[0],c=n[1],i={selectedIndex:r,onItemClick:function(t,n){var a=n===r;c(n),e.onItemClick&&e.onItemClick(t,n),!a&&e.onItemSelected&&e.onItemSelected(t,n)},items:e.items};return o.a.createElement("div",null,o.a.createElement(C.a,{itemData:i,height:e.height,width:"100%",itemSize:e.itemSize,itemCount:i.items.length},x))},P=n(97),A=Object(P.a)((function(e){return{root:{display:"flex"},playlists:{width:"100%",maxWidth:e.spacing(32),backgroundColor:e.palette.grey[900],margin:e.spacing(3)}}})),N=function(){var e=A(),t=Object(a.useState)(1),n=Object(l.a)(t,2),r=n[0],c=n[1],i=Object(a.useState)(null),s=Object(l.a)(i,2),u=s[0],m=s[1],h=Object(a.useState)(null),f=Object(l.a)(h,2),d=f[0],p=f[1],g=Object(a.useState)([{name:"Playlist 1"},{name:"Playlist 2"},{name:"Playlist 3"},{name:"Playlist 4"},{name:"Playlist 5"},{name:"Playlist 6"},{name:"Playlist 7"},{name:"Playlist 8"}]),v=Object(l.a)(g,2),k=v[0],y=v[1];Object(a.useEffect)((function(){var e,t;(e=10,t=20,E("me/playlists",{limit:e,offset:t}).then((function(e){return e||null}))).then((function(e){e&&y(e.items)})),w()}),[]);var w=function(){E("me/player/currently-playing").then((function(e){return e&&e.item?e.item.name:null})).then((function(e){m(e)}))};return o.a.createElement("div",{className:e.root},o.a.createElement("div",{className:e.playlists},o.a.createElement(I,{height:600,itemSize:46,items:k,onItemSelected:function(e,t){p(k[t])}})),o.a.createElement("div",null,o.a.createElement("img",{src:_.a,className:"App-logo",alt:"logo"}),o.a.createElement("p",null),o.a.createElement(j.a,{color:"primary",variant:"outlined",onClick:w},"Show Current Song"),o.a.createElement(j.a,{color:"primary",variant:"outlined",onClick:function(){c(r+1)}},"Increment (test)"),o.a.createElement("h1",null,u||"-No song is currently playing-"),o.a.createElement("h1",null,d?d.name:"-"),o.a.createElement("h1",null,r)))},B=n(47),z=function(){var e=Object(a.useState)([{name:"AAA"},{name:"BBB"}]),t=Object(l.a)(e,2),n=t[0],r=t[1];return o.a.createElement("div",null,o.a.createElement("h1",null,"Test Page"),o.a.createElement(j.a,{color:"primary",variant:"outlined",onClick:function(){r((function(e){return[].concat(Object(B.a)(e),[{name:"CCC"+(e.length+1)}])})),console.log("added CCC "+(n.length+1))}},"Add Item"),o.a.createElement(I,{height:400,itemSize:46,items:n,onItemSelected:function(e,t){return console.log("Selected item:",e.name)}}))},W=function(){return o.a.createElement("div",{className:"App"},o.a.createElement("img",{src:_.a,className:"App-logo",alt:"logo"}),o.a.createElement("h1",null,"Loading..."))},J=n(102),R=n(101),D=n(100),L=n(45),M=n(44),T=n.n(M),$=n(99),q=Object(L.a)({palette:{type:"dark",background:{default:"#121212"},primary:$.a,secondary:T.a}});var F=function(){return p(),v(),window.setInterval((function(){v()}),6e4),o.a.createElement("div",{className:"outerWrap"},o.a.createElement(D.a,{theme:q},o.a.createElement(R.a,null),o.a.createElement(J.b,{history:f},o.a.createElement("div",{className:"App"},o.a.createElement(J.c,null,o.a.createElement(J.a,{path:"/",exact:!0,component:N}),o.a.createElement(J.a,{path:"/test",exact:!0,component:z}),o.a.createElement(J.a,{path:"/loading",exact:!0,component:W}),o.a.createElement(J.a,{path:"/auth",exact:!0,component:function(){return p(),null}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(F,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[53,1,2]]]);
//# sourceMappingURL=main.fdea0f30.chunk.js.map
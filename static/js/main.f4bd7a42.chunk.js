(this["webpackJsonpspotify-u"]=this["webpackJsonpspotify-u"]||[]).push([[0],{24:function(e,t,n){},31:function(e,t,n){e.exports=n.p+"static/media/logo.5d5d9eef.svg"},59:function(e,t,n){e.exports=n(82)},64:function(e,t,n){},82:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),c=n.n(o),i=(n(64),n(9)),l=n(53),s=n(27),u=n.n(s),m=n(52),h=n(12),d=Object(h.a)(),p=new m.a,f=function(){g()},g=function(){var e=p.get("access_token");if(void 0!==e)return Promise.resolve(e);var t,n=function(){var e=u.a.parse(window.location.search),t=e.access_token,n=e.refresh_token,a=e.expires_in,r=Object(l.a)(e,["access_token","refresh_token","expires_in"]);return function(e){window.history.replaceState(null,"",window.location.href.replace(window.location.search,(""!==e?"?":"")+e))}(u.a.stringify(r)),window.location.hash=window.location.hash.replace("_=_",""),{access_token:t,expires_in:a,refresh_token:n}}();return e=n.access_token,void 0!==(t=e)&&null!==t&&""!==t?(E(e,n.refresh_token),Promise.resolve(e)):(k(),null)},v=function(){if(void 0===p.get("recently_refreshed_access_token")){var e=p.get("refresh_token");void 0!==e&&(console.log("Refreshing access token..."),fetch("https://spotify-u-backend.herokuapp.com/refresh_token?refresh_token="+e).then((function(e){return e.json()})).then((function(t){console.log("Refreshed access token"),E(t.access_token,e)})))}};function k(){d.push("/loading"),window.location.replace("https://spotify-u-backend.herokuapp.com/login")}function E(e,t){p.set("access_token",e,{path:"/",maxAge:3600}),p.set("refresh_token",t,{path:"/",maxAge:3600}),p.set("recently_refreshed_access_token","",{path:"/",maxAge:900})}function y(e,t){var n=g();return null===n?Promise.resolve(null):n.then((function(n){return fetch("https://api.spotify.com/v1/"+e+(t?"?"+u.a.stringify(t):""),{headers:{Authorization:"Bearer "+n}})})).then(w)}function w(e){var t=e.status;if(204===t)return Promise.resolve(null);var n=e.json();return Promise.all([t,n]).then((function(e){var t=Object(i.a)(e,2),n=t[0],a=t[1];return 401===n?(p.remove("access_token"),k(),null):200===n?a:null}))}var _=n(31),b=n.n(_),x=(n(24),n(104)),j=n(111),C=n(112),S=n(50);function O(e){var t=e.index,n=e.style,a=e.data.items[t];return r.a.createElement(j.a,{button:!0,style:n,key:t,selected:e.data.selectedIndex===t,onClick:function(){e.data.onItemClick&&e.data.onItemClick(a,t)}},r.a.createElement(C.a,{primaryTypographyProps:{noWrap:!0},primary:e.data.getText(a)}))}var I=function(e){var t=Object(a.useState)(null),n=Object(i.a)(t,2),o=n[0],c=n[1],l={selectedIndex:o,onItemClick:function(t,n){var a=n===o;c(n),e.onItemClick&&e.onItemClick(t,n),!a&&e.onItemSelected&&e.onItemSelected(t,n)},items:e.items,getText:e.getText};return r.a.createElement("div",null,r.a.createElement(S.a,{itemData:l,height:e.height,width:"100%",itemSize:e.itemSize,itemCount:l.items.length},O))},A=n(102),N=n(109),B=n(103),P=Object(A.a)((function(e){return{root:{display:"flex"},app:{width:"100%",justifyContent:"center"},header:{minHeight:400},sideBar:{width:"100%",maxWidth:e.spacing(40)},playlists:{minWidth:e.spacing(22),margin:e.spacing(3),backgroundColor:e.palette.grey[900]}}})),T=function(){var e=P(),t=Object(a.useState)(null),n=Object(i.a)(t,2),o=n[0],c=n[1],l=Object(a.useState)(null),s=Object(i.a)(l,2),u=s[0],m=s[1],h=Object(a.useState)([]),d=Object(i.a)(h,2),p=d[0],f=d[1];Object(a.useEffect)((function(){var e,t;(e=20,t=0,y("me/playlists",{limit:e,offset:t}).then((function(e){return e||null}))).then((function(e){e&&f(e.items)})),g()}),[]);var g=function(){y("me/player/currently-playing").then((function(e){return e&&e.item?e.item.name:null})).then((function(e){c(e)}))};return r.a.createElement("div",{className:e.root},r.a.createElement("div",{className:e.sideBar},r.a.createElement(B.a,{elevation:3,className:e.playlists},r.a.createElement(I,{height:600,itemSize:46,items:p,getText:function(e){return e.name},onItemSelected:function(e,t){m(e)}}))),r.a.createElement("div",{className:e.app},r.a.createElement(N.a,{className:e.header},u?r.a.createElement("div",null,r.a.createElement("img",{height:300,src:u.images[0].url}),r.a.createElement("h1",null,u.name)):r.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null)),r.a.createElement(x.a,{color:"primary",variant:"outlined",onClick:g},"Show Current Song"),r.a.createElement("h1",null,o||"-No song is currently playing-")),r.a.createElement("div",{className:e.sideBar}))},W=n(51),z=function(){var e=Object(a.useState)([{name:"AAA"},{name:"BBB"}]),t=Object(i.a)(e,2),n=t[0],o=t[1];return r.a.createElement("div",null,r.a.createElement("h1",null,"Test Page"),r.a.createElement(x.a,{color:"primary",variant:"outlined",onClick:function(){o((function(e){return[].concat(Object(W.a)(e),[{name:"CCC"+(e.length+1)}])})),console.log("added CCC "+(n.length+1))}},"Add Item"),r.a.createElement(I,{height:400,itemSize:46,items:n,getText:function(e){return e.name},onItemSelected:function(e,t){return console.log("Selected item:",e.name)}}))},J=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("img",{src:b.a,className:"App-logo",alt:"logo"}),r.a.createElement("h1",null,"Loading..."))},R=n(108),D=n(107),H=n(106),L=n(49),M=n(48),$=n.n(M),q=n(105),F=Object(L.a)({palette:{type:"dark",background:{default:"#181818"},primary:q.a,secondary:$.a,grey:{800:"#282828",900:"#121212"}}});var G=function(){return f(),v(),window.setInterval((function(){v()}),6e4),r.a.createElement("div",{className:"outerWrap"},r.a.createElement(H.a,{theme:F},r.a.createElement(D.a,null),r.a.createElement(R.b,{history:d},r.a.createElement("div",{className:"App"},r.a.createElement(R.c,null,r.a.createElement(R.a,{path:"/",exact:!0,component:T}),r.a.createElement(R.a,{path:"/test",exact:!0,component:z}),r.a.createElement(R.a,{path:"/loading",exact:!0,component:J}),r.a.createElement(R.a,{path:"/auth",exact:!0,component:function(){return f(),null}}))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(G,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[59,1,2]]]);
//# sourceMappingURL=main.f4bd7a42.chunk.js.map
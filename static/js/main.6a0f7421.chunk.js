(this["webpackJsonpspotify-u"]=this["webpackJsonpspotify-u"]||[]).push([[0],{20:function(e,n,t){e.exports=t(32)},25:function(e,n,t){},32:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(15),c=t.n(r),l=(t(25),t(4)),s=t(33),i=t(18),u=t(5),f=t.n(u),h=t(17),m=t(2),p=Object(m.a)(),d=new h.a,v=function(){g()},g=function(){var e=d.get("access_token");if(void 0!==e)return Promise.resolve(e);var n,t=function(){var e=f.a.parse(window.location.search),n=e.access_token,t=e.refresh_token,o=e.expires_in,a=Object(i.a)(e,["access_token","refresh_token","expires_in"]);return function(e){window.history.replaceState(null,null,window.location.href.replace(window.location.search,(""!==e?"?":"")+e))}(f.a.stringify(a)),window.location.hash=window.location.hash.replace("_=_",""),{access_token:n,expires_in:o,refresh_token:t}}();return e=t.access_token,void 0!==(n=e)&&null!==n&&""!==n?(w(e,t.refresh_token),Promise.resolve(e)):(_(),null)},k=function(){if(void 0===d.get("recently_refreshed_access_token")){var e=d.get("refresh_token");return void 0===e?null:(console.log("Refreshing access token..."),fetch("https://spotify-u-backend.herokuapp.com/refresh_token?refresh_token="+e).then((function(e){return e.json()})).then((function(n){console.log("Refreshed access token");var t=n.access_token;return w(t,e),t})))}};function _(){p.push("/loading"),window.location.replace("https://spotify-u-backend.herokuapp.com/login")}function w(e,n){d.set("access_token",e,{path:"/",maxAge:3600}),d.set("refresh_token",n,{path:"/",maxAge:3600}),d.set("recently_refreshed_access_token","",{path:"/",maxAge:900})}function E(e,n){var t=g();return null===t?Promise.resolve(null):t.then((function(t){return fetch("https://api.spotify.com/v1/"+e+(n?"?"+f.a.stringify(n):""),{headers:{Authorization:"Bearer "+t}})})).then(b)}function b(e){var n=e.status;if(204===n)return Promise.resolve(null);var t=e.json();return Promise.all([n,t]).then((function(e){var n=Object(l.a)(e,2),t=n[0],o=n[1];return 401===t?(d.remove("access_token"),_(),null):200===t?o:null}))}var y=t(7),j=t.n(y);t(9);var x=Object(s.d)((function(e){var n=Object(o.useState)(1),t=Object(l.a)(n,2),r=t[0],c=t[1],s=Object(o.useState)(null),i=Object(l.a)(s,2),u=i[0],f=i[1],h=Object(o.useState)(null),m=Object(l.a)(h,2),p=m[0],d=m[1];Object(o.useEffect)((function(){g(),v()}),[]);var v=function(e){var n,t;(n=1,t=e,E("me/playlists",{limit:n,offset:t}).then((function(e){return e||null}))).then((function(e){d(e.items[0].name)}))},g=function(){E("me/player/currently-playing").then((function(e){return e?e.item.name:null})).then((function(e){f(e)}))};return a.a.createElement("div",{className:"App"},a.a.createElement("img",{src:j.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null),a.a.createElement("button",{onClick:g},"Show Current Song"),a.a.createElement("h1",null,u||"-No song is currently playing-"),a.a.createElement("button",{onClick:function(){c(r+1),v(r)}},"Increment (test)"),a.a.createElement("h1",null,r," ",a.a.createElement("br",null),p||"-"))}));var O=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("img",{src:j.a,className:"App-logo",alt:"logo"}),a.a.createElement("h1",null,"Loading..."))};var A=function(){return v(),k(),window.setInterval((function(){k()}),6e4),a.a.createElement(s.b,{history:p},a.a.createElement("div",{className:"App"},a.a.createElement(s.c,null,a.a.createElement(s.a,{path:"/",exact:!0,component:x}),a.a.createElement(s.a,{path:"/loading",exact:!0,component:O}),a.a.createElement(s.a,{path:"/auth",exact:!0,component:function(){return v(),null}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(A,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},9:function(e,n,t){}},[[20,1,2]]]);
//# sourceMappingURL=main.6a0f7421.chunk.js.map
(this["webpackJsonpspotify-u"]=this["webpackJsonpspotify-u"]||[]).push([[0],{18:function(e,n,t){e.exports=t(30)},23:function(e,n,t){},30:function(e,n,t){"use strict";t.r(n);var o=t(0),a=t.n(o),r=t(14),c=t.n(r),s=(t(23),t(4)),l=t(15),i=t.n(l),u=t(17),p=t(2),h=Object(p.a)(),f=new u.a,m=function(){g()},g=function(){console.log("accessToken1");var e=f.get("access_token");if(void 0!==e)return Promise.resolve(e);console.log("accessToken2");var n,t=function(){var e=i.a.parse(window.location.search);return{access_token:e.access_token,expires_in:e.expires_in,refresh_token:e.refresh_token}}();return e=t.access_token,void 0!==(n=e)&&null!==n&&""!==n?(f.set("access_token",e,{path:"/",maxAge:t.expires_in}),f.set("refresh_token",t.refresh_token,{path:"/",maxAge:t.expires_in}),Promise.resolve(e)):(console.log("accessToken3"),k(),null)},v=function(){if(void 0===f.get("recently_refreshed_access_token")){var e=f.get("refresh_token");if(void 0===e)return null;return console.log("Refreshing access token..."),fetch("https://spotify-u-backend.herokuapp.com/refresh_token?refresh_token="+e).then((function(e){return e.json()})).then((function(n){console.log("Refreshed access token");var t=n.access_token;return f.set("access_token",t,{path:"/",maxAge:3600}),f.set("refresh_token",e,{path:"/",maxAge:3600}),f.set("recently_refreshed_access_token","",{path:"/",maxAge:300}),t}))}};function k(){h.push("/loading"),window.location.replace("https://spotify-u-backend.herokuapp.com/login")}function d(e){var n=e.status;if(204===n)return Promise.resolve(null);var t=e.json();return Promise.all([n,t]).then((function(e){var n=Object(s.a)(e,2),t=n[0],o=n[1];return console.log("processResponse1"),401===t?(console.log("processResponse2"),f.remove("access_token"),k(),null):200===t?o:null}))}var _=t(6),E=t.n(_);t(8);var w=function(){var e=Object(o.useState)(0),n=Object(s.a)(e,2),t=n[0],r=n[1],c=Object(o.useState)(null),l=Object(s.a)(c,2),i=l[0],u=l[1];return Object(o.useEffect)((function(){}),[]),a.a.createElement("div",{className:"App"},a.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo"}),a.a.createElement("p",null),a.a.createElement("button",{onClick:function(){(function(){var e=g();return null===e?Promise.resolve(null):e.then((function(e){return fetch("https://api.spotify.com/v1/me/player/currently-playing",{headers:{Authorization:"Bearer "+e}})})).then(d).then((function(e){return e?e.item.name:null}))})().then((function(e){u(e)}))}},"Show Current Song"),a.a.createElement("h1",null,i||"-No song is currently playing-"),a.a.createElement("button",{onClick:function(){r(t+1),h.push("/loading")}},"Increment"),a.a.createElement("h1",null,t))};var y=function(){return a.a.createElement("div",{className:"App"},a.a.createElement("img",{src:E.a,className:"App-logo",alt:"logo"}),a.a.createElement("h1",null,"Loading..."))},b=t(32);var x=function(){return v(),window.setInterval((function(){v()}),6e5),m(),a.a.createElement(b.b,{history:h},a.a.createElement("div",{className:"App"},a.a.createElement(b.c,null,a.a.createElement(b.a,{path:"/loading",component:y}),a.a.createElement(b.a,{path:"/",exact:!0,component:w}),a.a.createElement(b.a,{path:"/auth",exact:!0,component:function(){return m(),null}}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(x,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,n,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},8:function(e,n,t){}},[[18,1,2]]]);
//# sourceMappingURL=main.6021fb15.chunk.js.map